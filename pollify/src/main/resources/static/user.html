<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link href="/css/home.css" rel="stylesheet">
    <link href="/css/user.css" rel="stylesheet">
    <title>Pollify</title>
</head>

<body>
    <nav class="navbar">
        <div class="logo">
            <h1>Pollify</h1>
        </div>
        <div>
            <button class="btn-primary mx-auto mb-3" onclick="logoutUser()">LogOut</button>
        </div>
    </nav>

    <section id="hero" class="my-5">
        <h1 class="mb-4">Welcome User!</h1>
        <button class="create-button"><a href="/new"> + &nbsp;Create</a></button>
    </section>
    <section id="quiz" class="container-fluid m-auto survey-card-container p-5 mt-5">
        <div class="card px-3 py-3 form-card mx-auto p-5 mb-5">
            <div class="survey-card-header">
                <h3 class="my-3">Survey Name</h3>
                <p>15-01-2025</p>
            </div>

            <div class="survey-buttons">
                <button class="btn-primary mx-auto mb-3 basic">Edit Survey</button>
                <button class="btn-primary mx-auto mb-3"><a href="/join">Start Survey</a></button>
                <button class="btn-primary mx-auto mb-3 basic"><a href="/result">Show Results</a></button>
            </div>

        </div>

        <div class="card px-3 py-3 form-card mx-auto p-5 mb-5">
            <div class="survey-card-header">
                <h3 class="my-3">Survey Name</h3>
                <p>15-01-2025</p>
            </div>

            <div class="survey-buttons">
                <button class="btn-primary mx-auto mb-3 basic">Edit Survey</button>
                <button class="btn-primary mx-auto mb-3"><a href="/join">Start Survey</a></button>
                <button class="btn-primary mx-auto mb-3 basic"><a href="/result">Show Results</a></button>
            </div>

        </div>
    </section>

    <footer>Made by Rathin</footer>
</body>

<script>
    async function logoutUser() {

    const response = await fetch("/api/users/logout", {
        method: "POST",
        credentials: "include",
        headers: {
            "Content-Type": "application/json"
        }
    });

    if (response.ok) {
        window.location.href = '/login.html';
    } else {
        alert('Failed to log out. Try again.');
    }
}
</script>
</html>